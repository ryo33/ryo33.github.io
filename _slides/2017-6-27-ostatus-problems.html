---
layout: remark-slide
title: 既存のアーキテクチャの問題点とYayakaプロトコル
---

class: center, middle

# 既存のアーキテクチャの問題点とYayakaプロトコル

## Ryo33 (Ryo Hashiguchi)

---

# 概要

- 既存のアーキテクチャの問題点
- Yayakaプロトコルがそれをどのように解決するか

???
アーキテクチャの時点で問題が生じている。

---

class: center, middle

# 既存のアーキテクチャとは？

---

# ここで考える既存のアーキテクチャ

- Twitterのようなサーバーが複数立つ
- リモートフォロー

???
それぞれのインスタンスが独立してSNSとして機能する + リモートフォロー

---

# 問題

1. 移住の厳しさ
2. 多数のコミュニティーに参加することの難しさ
3. サーバーの運用コスト

---

# 問題1. 移住の厳しさ
- 移住が必要になるとき
- 移住が厳しいとは？

---

# 移住が必要になるとき

- サービスの提供停止
- インスタンス内検閲
- インスタンス外検閲
- 改悪
- 新しいUIや機能を使いたい
- ユーザーがインスタンスと深く結びついているため管理者は容易に独裁できる

???
マストドンのUIを使いたかったがGNU Socialでアカウント持ってるし……みたいな
他のインスタンスの機能羨ましい。

---

# 移住が厳しいとは？

- メールアドレスとパスワードの用意（半分実装の問題）
- フォロー関係の維持
- 投稿内容の維持

???
メールアドレスとパスワードはどちらかと言うと実装の問題

---

# 問題2. 多数のコミュニティーに属することの難しさ

- コミュニティー　＝　インスタンス
- 複数のインスタンスでアカウントを作成する必要がある
- 移住の厳しさと同様

???
コミュニティーとインスタンスに深い結び付きがあるのはアーキテクチャにも問題がある
問題点の数稼ぎ

---

# 問題3. サーバーの運用コスト

- 人数が多くなってくると厳しい
- 安定の企業運営インスタンス
- 分散SNSをメインストリームにしていくとして今の形態を保てるか

???
結局企業が強い

---

# Yayakaプロトコルのアプローチ

- 分散SNSを機能ごとに*サービス*という単位に分割
- それぞれの*サービス*は独立しているため別々のサーバーに置くことができる
- 各インスタンスは自分が持っておきたい機能だけ実装すればいい

---

# 5つのサービスとその目的

- Identityサービス  
ユーザー管理の独立
- Repositoryサービス  
イベント永続化の独立
- Social Graphサービス  
タイムライン生成の独立
- Presentationサービス  
UIやAPIの独立
- Notificationサービス  
通知機能の独立

---

# マストドンでYayakaプロトコルが実装されたら

- ユーザー登録丼 、永続化丼、ソーシャルグラフ丼、UI丼、通知丼が独立して存在できるようになる
- 運用コストが高くなるのは主に永続化丼とソーシャルグラフ丼
- 各ユーザーは同時に複数の永続化丼、ソーシャルグラフ丼、UI丼を使うことができ、シームレスに移住可能
- 他のサーバーのUIだけを使うこともできる
- 例えば個人運営の地域丼みたいなやつはUI丼を置くだけで良い

---

class: center, middle

# なぜこれがうまくいくのか

???
このようなアーキテクチャは非常にうまくいくことがわかっています。

---

# 例: メーリングリスト

メーリングリストは似たようなアーキテクチャです。

- Mail Clientサービス  
  メールを送信、閲覧するUIを提供
- Mailサービス  
  メールの送受信を行う
- Mailing Listサービス  
  メールを配信する

- ユーザーは複数のメールクライアント・メールアドレス・メーリングリストを利用する
- 無限の組み合わせ
- 場所を追われたら別のサーバーを使えばいい

???
本当の分散

---

# 最後に

- 分散SNSをメインストリームにしていく気があるならOStatusに限界がないか考える必要がある
- 自分の不満がマストドンなどの実装に対するものかOStatusに対するものか見極める必要がある

???
問題点がアーキテクチャレベルで発生している可能性

---

# 参考文献

- [gnusocial や mastodon の哲学 - 何とは言わない天然水飲みたさ](https://blog.cardina1.red/2017/04/13/federated-social-web/) 2017/6/21参照
- [documentation/Resources-needed.md at master · tootsuite/documentation](https://github.com/tootsuite/documentation/blob/master/Running-Mastodon/Resources-needed.md) 2017/6/21参照
- [Mastodonを設置したときのメモ - たていすのメモ](http://d.hatena.ne.jp/tateisu/20170416/1492341633) 2017/6/21参照
- [「鎖国」から生まれた関西広域連合の行方　脱中央集権（東京）の鍵　マストドン会議4 - ITmedia NEWS](http://www.itmedia.co.jp/news/articles/1706/14/news140.html) 2017/6/22参照
- [本の虫: マストドンが直面している問題はすでにP2P技術が15年前に遭遇した問題だ](https://cpplover.blogspot.jp/2017/04/p2p15.html) 2017/6/27参照
- [本の虫: ここらでもう一度マストドンについて語っておくか](https://cpplover.blogspot.jp/2017/04/blog-post_20.html) 2017/6/27参照
